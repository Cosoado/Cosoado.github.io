<!DOCTYPE html>
<html lang="ja">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-XXXXXXXXXX');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact | Cosoado Lab</title>
    <meta name="description" content="Cosoado Labへのお問い合わせはこちらから。AIプロダクト開発に関するご質問やご依頼を受け付けています。">

    <link rel="stylesheet" href="../style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&family=Zen+Kaku+Gothic+New:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="icon" href="/favicon.png" type="image/png">
</head>

<body>
    <!-- Fluid Background Animation -->
    <div class="fluid-bg">
        <div class="blob"></div>
        <div class="blob"></div>
        <div class="blob"></div>
    </div>

    <!-- Custom Cursor -->
    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>

    <header class="header">
        <div class="container" style="display: flex; justify-content: space-between; width: 100%;">
            <a href="/" class="logo">
                <img src="../assets/logo_transparent.png" alt="Cosoado Lab" class="logo-image">
                <span class="logo-text">Cosoado Lab</span>
            </a>
            <!-- Simple Navigation if needed, or stick to minimalist -->
            <nav class="nav-links" style="display: flex; gap: 20px; align-items: center;">
                <!-- Ideally standardized nav should be here, but for now we just link back -->
                <a href="/" style="text-decoration: none; color: var(--text-primary); font-weight: 500;">Home</a>
            </nav>
        </div>
    </header>

    <main>
        <section class="section">
            <div class="container contact-container">
                <div class="contact-header" style="margin-top: 40px;">
                    <h1 class="hero-title" style="font-size: 3rem; margin-bottom: 1rem;">Contact Us</h1>
                    <p class="hero-subtitle" style="margin-bottom: 3rem;">
                        ご質問、ご依頼、その他お気軽にお問い合わせください。<br>
                        新しいアイデアやコラボレーションについてもお待ちしております。
                    </p>
                </div>

                <!-- Contact Form -->
                <div class="contact-card glass-panel">
                    <!-- 
                        NOTE: Replace 'YOUR_FORM_ID' with your actual Formspree ID.
                        Register at https://formspree.io/ to get one.
                    -->
                    <form id="contact-form" method="POST" class="contact-form">
                        <div class="form-group">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" id="name" name="name" class="form-input" required placeholder="お名前">
                        </div>

                        <div class="form-group">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" id="email" name="email" class="form-input" required
                                placeholder="メールアドレス">
                            <span id="email-error" class="form-error"></span>
                        </div>

                        <div class="form-group">
                            <label for="subject" class="form-label">Subject</label>
                            <input type="text" id="subject" name="subject" class="form-input" required placeholder="件名">
                        </div>

                        <div class="form-group">
                            <label for="message" class="form-label">Message</label>
                            <textarea id="message" name="message" class="form-textarea" required
                                placeholder="お問い合わせ内容"></textarea>
                        </div>

                        <div id="form-status" class="form-status"></div>

                        <button type="submit" class="submit-btn" id="submit-btn">
                            Send Message
                            <span class="btn-icon">→</span>
                        </button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2026 Cosoado Lab. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="../script.js"></script>
    <script>
        // Form Action Injection (Security Obfuscation)
        const contactForm = document.getElementById('contact-form');
        const formId = "xjgklleb"; // Formspree ID
        contactForm.setAttribute("action", "https://formspree.io/f/" + formId);

        // Form Validation Script
        const emailInput = document.getElementById('email');
        const emailError = document.getElementById('email-error');
        const form = document.querySelector('.contact-form');
        const submitBtn = document.getElementById('submit-btn');

        const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;

        function validateEmail() {
            if (!emailInput.value.match(emailPattern)) {
                emailError.textContent = '有効なメールアドレスを入力してください';
                emailError.style.display = 'block';
                return false;
            } else {
                emailError.textContent = '';
                emailError.style.display = 'none';
                return true;
            }
        }

        emailInput.addEventListener('blur', function () {
            if (this.value) validateEmail();
        });

        emailInput.addEventListener('input', function () {
            if (emailError.textContent) validateEmail();
        });

        form.addEventListener('submit', async function (e) {
            e.preventDefault();
            if (!validateEmail()) {
                // Shake animation or focus
                emailInput.focus();
                emailInput.style.borderColor = '#ff6b6b';
                setTimeout(() => {
                    emailInput.style.borderColor = 'rgba(255, 255, 255, 0.1)';
                }, 2000);
                return;
            }

            const status = document.getElementById('form-status');
            const data = new FormData(e.target);
            const action = e.target.action;

            // Loading state
            submitBtn.disabled = true;
            submitBtn.textContent = 'Sending...';

            try {
                const response = await fetch(action, {
                    method: form.method,
                    body: data,
                    headers: {
                        'Accept': 'application/json'
                    }
                });

                if (response.ok) {
                    status.innerHTML = "お問い合わせありがとうございます。<br>メッセージが送信されました。";
                    status.className = "form-status success";
                    status.style.display = "block";
                    form.reset(); // Clear form
                } else {
                    const jsonData = await response.json();
                    let errorMsg = "送信に失敗しました。もう一度お試しください。";

                    if (jsonData.errors) {
                        // Extract first error message if available
                        errorMsg = jsonData.errors.map(error => error.message).join(", ");
                    }

                    status.innerHTML = errorMsg;
                    status.className = "form-status error";
                    status.style.display = "block";
                }
            } catch (error) {
                status.innerHTML = "エラーが発生しました。インターネット接続を確認してください。";
                status.className = "form-status error";
                status.style.display = "block";
            } finally {
                // Reset button
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Send Message <span class="btn-icon">→</span>';
            }
        });
    </script>
</body>

</html>